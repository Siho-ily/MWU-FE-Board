<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<section layout:fragment="content">
  <h2>게시글 수정</h2>

  <form id="board_form" name="board_form" method="post">
    <input type="hidden" name="reg_no" th:attr="value=${result.data.reg_no}">

    <table>
      <tr>
        <th>제목</th>
        <td>
          <input type="text" id="title" name="title" class="title" th:attr="value=${result.data.title}">
        </td>
      </tr>
      <tr>
        <th>내용</th>
        <td>
          <textarea id="contents" name="contents" style="width:100%;height:200px;" th:text="${result.data.contents}"></textarea>
        </td>
      </tr>

      <tr>
        <td colspan="2">
          <button type="button" id="btn_submit">수정</button>
        </td>
      </tr>
    </table>
  </form>

  <script>
    $(document).ready(function() {
      let form = $('#board_form');

      $('#btn_submit').click(function() {
        let title = $("#title").val();
        let contents = $("#contents").val();

        if($.trim(title) === "" || title.length == 0) {
          alert("제목을 입력해주세요.");
          return;
        }

        if($.trim(contents) === "" || contents.length == 0) {
          alert("내용을 입력해주세요.");
          return;
        }

        let check = confirm("게시글을 수정하시겠습니까?");

        if(check) {
          form.attr('action', '/board/update').submit();
        }
      });
    });
  </script>
</section>
</html>
